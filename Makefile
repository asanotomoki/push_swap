NAME	=	push_swap
LIBFTDIR = ./libft
LIBFT = $(LIBFTDIR)/libft.a
CC  = cc
CFLAGS    =   -Wall -Werror -Wextra -g -fsanitize=address -fsanitize=integer -fsanitize=undefined
INCLUDES   = ./includes
SRC_DIR    = ./srcs
AR = ar
ARFLAFS = -rcs
RM = rm -f
SOURCES	=	main.c \
			format_6elems.c \
			main_sort.c \
			cmd_push.c \
			cmd_reverse.c \
			cmd_rotate.c \
			cmd_swap.c \
			stack_operation.c \
			ft_push.c \
			ft_pop.c \
			error.c \
			util.c \
			quicksort.c \
			create_stackdata.c

OBJDIR    = ./obj
OBJECTS   = $(addprefix $(OBJDIR)/, $(notdir $(SOURCES:.c=.o)))
DEPENDS   = $(OBJECTS:.o=.d)

${NAME}: ${INCLUDES} ${OBJECTS}
		make -C $(LIBFTDIR)
		$(CC) ${CFLAGS} ${LIBFT} ${OBJECTS} -o $@

$(OBJDIR)/%.o: $(SRC_DIR)/%.c
	-mkdir -p $(OBJDIR)
	$(CC) $(CFLAGS) -I $(INCLUDES) -o $@ -c $<

all: $(NAME)

clean:
	make clean -C $(LIBFTDIR)
	$(RM) $(OBJECTS)
	rm -rf $(OBJDIR)

fclean:	clean
	$(RM) $(NAME)
	$(RM) $(LIBFT)

re: fclean all

test: $(NAME)
	./push_swap 726075	458462	17600	209233	269302	176697	296059	22536	234769	603404	592921	887729	307278	458909	884073	764699	490026	345669	488564	45198	28302	24684	41238	313327	340333	250669	551862	412389	808882	476764	678436	146327	464074	418899	119658	893224	489863	847388	570581	588047	389615	600000	450530	110324	812487	470720	527157	416904	852383	315316

test1: $(NAME)
	./push_swap 650652	245847	113580	595861	285103	277187	70457	977179	753158	371997	175881	294843	80809	972140	646627	432876	750084	613598	243880	61841	767093	966143	979703	611117	791280	628117	507244	891794	230892	341650	218899	937935	426884	29556	641558	129281	439501	79751	645786	648718	30155	634400	152585	254527	369165	688190	406454	832115	259153	874779	998340	288484	501573	153755	28351	409739	44406	540868	956335	240482	787241	985911	412670	766869	905297	233953	727517	200831	395416	902239	211399	207899	169205	550991	947198	969799	64041	655129	420824	429710	228195	9737	623194	854199	807271	311083	851269	731921	302537	902098	76959	564251	218404	930075	689894	87209	619787	741936	390450	853897
.PHONY: all bonus fclean clean re test
